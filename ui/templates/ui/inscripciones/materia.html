{% extends "ui/base.html" %}
{% load static %}

{% block title %}Inscribir a Materias{% endblock %}

{% block content %}
<div class="p-4">
  <div class="flex items-center justify-between mb-4">
    <h1 class="text-2xl font-semibold">Inscribir a Materias</h1>
    <button onclick="history.back()" class="px-3 py-2 rounded border">Volver</button>
  </div>

  <div class="rounded-2xl border bg-white p-4 md:p-6">
    <form method="post"
          id="form-insc-mat"
          data-planes-url="{% url 'ui:api_planes' %}"
          data-materias-url="{% url 'ui:api_materias' %}">
      {% csrf_token %}

      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <!-- Profesorado / Carrera -->
        <div>
          <label class="block text-sm font-medium mb-1">Profesorado / Carrera</label>
          <select id="id_profesorado" name="profesorado" class="w-full rounded border px-3 py-2">
            <option value="">---------</option>
            {% for p in profesorados %}
              <option value="{{ p.id }}" {% if p.id|stringformat:"s" == prefill_prof %}selected{% endif %}>
                {{ p }}
              </option>
            {% endfor %}
          </select>
        </div>

        <!-- Plan -->
        <div>
          <label class="block text-sm font-medium mb-1">Plan</label>
          <select id="id_plan" name="plan" class="w-full rounded border px-3 py-2" disabled>
            <option value="">---------</option>
          </select>
        </div>

        <!-- Materia / Espacio -->
        <div class="md:col-span-2">
          <label class="block text-sm font-medium mb-1">Materia / Espacio</label>
          <select id="id_materia" name="materia" class="w-full rounded border px-3 py-2" disabled>
            <option value="">---------</option>
          </select>
        </div>
      </div>

      <div class="mt-6 flex gap-2">
        <button class="px-4 py-2 rounded bg-slate-800 text-white">Inscribir</button>
        <button type="button" onclick="history.back()" class="px-4 py-2 rounded border">Cancelar</button>
      </div>
    </form>
  </div>
</div>

<script>
  window.__INSCR_MAT_PREFILL__ = {
    prof: "{{ prefill_prof|default:'' }}",
    plan: "{{ prefill_plan|default:'' }}",
    mat:  "{{ prefill_mat|default:'' }}"
  };
</script>
<script src="{% static 'ui/js/inscripcion_materia.js' %}"></script>
{% endblock %}