{% extends "ui/base.html" %}
{% load static %}

{% block content %}
<div class="card">
  <div class="card-body">
    <h5 class="mb-2">Inscripción en Profesorado</h5>
    <p class="text-muted">Podés preseleccionar el estudiante usando <code>?est=&lt;ID&gt;</code>.</p>

    <form method="post" enctype="multipart/form-data" novalidate>
      {% csrf_token %}

      <div class="row g-3">
        <div class="col-12 col-md-6">
          {{ form.estudiante.label_tag }} {{ form.estudiante }}
        </div>
        <div class="col-12 col-md-6">
          {{ form.profesorado.label_tag }} {{ form.profesorado }}
        </div>
        <div class="col-12 col-md-6">
          {{ form.plan.label_tag }} {{ form.plan }}
        </div>
        <div class="col-12 col-md-6">
          {{ form.cohorte.label_tag }} {{ form.cohorte }}
        </div>
      </div>

      <hr class="my-3">

      <div class="row g-3">
        <div class="col-12 col-lg-8">
          <h6 class="mb-2">Requisitos de Ingreso</h6>

          {# --- Otros checks (los "base") que te faltan --- #}
          <div class="row g-2 mb-2">
            {% for id,label in base_checks %}
              <div class="col-6 col-md-4 col-xl-3">
                <div class="form-check">
                  <input class="form-check-input" type="checkbox" id="{{ id }}" name="{{ id }}">
                  <label class="form-check-label" for="{{ id }}">{{ label }}</label>
                </div>
              </div>
            {% endfor %}
          </div>

          {# --- Grupo de profesorados común --- #}
          <div class="row g-2">
            <div class="col-6 col-md-4 col-xl-3">
              <div class="form-check">
                <input class="form-check-input" type="checkbox"
                       id="titulo_secundario_legalizado" name="titulo_secundario_legalizado">
                <label class="form-check-label" for="titulo_secundario_legalizado">
                  Doc título sec legalizado
                </label>
              </div>
            </div>

            <div class="col-6 col-md-4 col-xl-3">
              <div class="form-check">
                <input class="form-check-input" type="checkbox"
                       id="titulo_en_tramite" name="titulo_en_tramite">
                <label class="form-check-label" for="titulo_en_tramite">Título en trámite</label>
              </div>
            </div>

            <div class="col-6 col-md-4 col-xl-3">
              <div class="form-check">
                {# IMPORTANTE: el id debe ser EXACTAMENTE "adeuda_materia" #}
                <input class="form-check-input" type="checkbox"
                       id="adeuda_materia" name="adeuda_materia">
                <label class="form-check-label" for="adeuda_materia">Adeuda materias</label>
              </div>
            </div>
          </div>

          {# --- Campos dependientes de "Adeuda..." --- #}
          <div id="adeuda_fields" class="row g-2 mt-1 d-none">
            <div class="col-12 col-md-6">
              <label class="form-label">Materias adeudadas</label>
              <input type="text" class="form-control" id="materias_adeudadas"
                     name="materias_adeudadas" disabled>
            </div>
            <div class="col-12 col-md-6">
              <label class="form-label">Escuela / Institución</label>
              <input type="text" class="form-control" id="institucion_adeuda"
                     name="institucion_adeuda" disabled>
            </div>
          </div>
        </div>

        <div class="col-12 col-lg-4">
          <h6 class="mb-2">Condición</h6>
          <input type="hidden" id="id_condicion" name="condicion" value="Libre">
          <span id="condicion_badge"
                class="badge rounded-pill text-bg-secondary"
                data-condicion="libre">Libre</span>
        </div>
      </div>

      <div class="mt-3 d-flex gap-2">
        <button class="btn btn-primary" type="submit">Inscribir</button>
        <a class="btn btn-light" href="{{ cancel_url|default:'/' }}">Cancelar</a>
      </div>
    </form>
  </div>
</div>

{# Carga el JS #}
<script src="{% static 'ui/js/inscripcion_profesorado.js' %}"></script>
{% endblock %}